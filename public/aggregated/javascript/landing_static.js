/************************************************************************
 * 'landing_static.js'
 *
 * This file is GENERATED by the AssetAggregator; do not edit it.
 * Last modified: 2016-03-03 23:50:10 +0000
 * Generated at: 2016-03-22 23:30:00 +0000
 ************************************************************************/


/************************************************************************
 * :files, 'spec_javascripts', ... (last modified: (none))
 ************************************************************************/





/************************************************************************
 * :files, 'spec_javascripts', ... (last modified: (none))
 ************************************************************************/





/************************************************************************
 * :asset_packager_compatibility, 'config/asset_packages.yml' (last modified: 2016-03-03 23:50:10 +0000)
 ************************************************************************/





/************************************************************************
 * :asset_packager_compatibility, 'config/asset_packages.yml' (last modified: 2016-03-03 23:50:10 +0000)
 ************************************************************************/





/************************************************************************
 * :files, 'public/javascripts/shared', ... (last modified: (none))
 ************************************************************************/





/************************************************************************
 * :files, 'app/views', ... (last modified: 2016-02-18 20:37:17 +0000)
 ************************************************************************/

/* ----------------------------------------------------------------------
   - app/views/landing/static/augmented.js (last modified: 2016-02-18 20:37:17 +0000)
   ---------------------------------------------------------------------- */
var staticMarketingPages = {
	on_resize:  function(){
		// Homepage, Folks Also.
		var _alsoLikeWidth = $(".overflow.scroll .object_cell.is_book").length *
			$(".overflow.scroll .object_cell.is_book").outerWidth(true);
		$(".overflow.scroll.also_liked").css("width", _alsoLikeWidth + 20);

		// Category Editors' Picks
		var _categoryReviewWidth = $(".overflow.scroll .object_cell.is_review").length *
			$(".overflow.scroll .object_cell.is_review").outerWidth(true);
		$(".category_book_extra_info .overflow.scroll").css("width", _categoryReviewWidth + 90);
	},
	carouselScroll: function(e){
		var scroller = $(this).parent().next().find(".carousel_scrollbar_thumb");
		if(scroller.length !== 1){
			scroller = $(this).parent().find(".carousel_scrollbar_thumb");
		}
		if(scroller.length !== 1) {
			console.log("scroll bar handle not found");
			return;
		}
		var scrollWindowTotalWidth = 0;

		$(this).find(".object_cell").each(function(e){
			scrollWindowTotalWidth += $(this).outerWidth(true);
		});
		scrollWindowTotalWidth -=  + $(this).parent().width();

		var scrollerPosition = $(this).scrollLeft();
		var scrollPercent = scrollerPosition / scrollWindowTotalWidth;
		var scrollerTrackWidth = scroller.parent().width();
		var scrollBarWidth = 300;

		// var left = from 0 to (scrollerTrackWidth - scrollBarWidth) ;
		var left = (scrollPercent * (scrollerTrackWidth - scrollBarWidth));
		scroller.css("left", left + "px");
		scroller.css("right", "auto");
	},
	clickPaddleSprite: function(e){
		var _t = $(this);
		var scrollWidth = $(".page_column").width()/2;
		var theScrollWindow = _t.parent().parent().find(".carousel_scrolling");
		if(theScrollWindow.length !== 1){ return; }
		var scrollLeft = theScrollWindow.scrollLeft();
		if (_t.hasClass("paddle_right_sprite")){
			return theScrollWindow.animate({scrollLeft: (scrollLeft + scrollWidth) + "px"}, 500);
		}
		return theScrollWindow.animate({scrollLeft: (scrollLeft - scrollWidth) + "px"}, 500);
	},
	toggle_additional_details: function(){
		$(".additional_data").slideToggle(250);
	},
	launchPreviewWall: function(e){
		e.preventDefault();
		return Scribd.Lightbox.open("previewWall");
	},
	clickCategory: function(e){
		var anchor = $(this).data("anchor");
		window.location = anchor;
	}
};

$(function(){
	staticMarketingPages.on_resize();
	$(window).on("resize", staticMarketingPages.on_resize);

	// Book Details Toggle.
	$(".additional_data").slideToggle(250);
	$("span.toggle_data_btn").on("click", staticMarketingPages.toggle_additional_details);
	$(".carousel_scrolling").on("scroll", staticMarketingPages.carouselScroll);
	$(".paddle_sprite").click(staticMarketingPages.clickPaddleSprite);
	$('a.launchPreviewWall').click(staticMarketingPages.launchPreviewWall);
	$(".romance_category .right .category_blocks_cell").click(staticMarketingPages.clickCategory);

});




/************************************************************************
 * :files, 'app/views', ... (last modified: 2015-11-10 00:53:08 +0000)
 ************************************************************************/

/* ----------------------------------------------------------------------
   - app/views/landing/static/landing.coffee (last modified: 2015-11-10 00:53:08 +0000)
   ---------------------------------------------------------------------- */
(function() {
  Scribd.CRLanding = (function() {
    function CRLanding(container, opts) {
      var trial_buttons;
      this.opts = opts;
      this.container = $(container);
      this.container.center_in_parent();
      this.container.parallax_folds();
      trial_buttons = this.container.find(".has_subscribe_url, .start_trial_btn, .primary_start_trial_btn").attr("href", this.opts.subscribe_url).on("click", (function(_this) {
        return function(e) {
          var btn;
          if (Scribd.logged_in) {
            return;
          }
          btn = $(e.target);
          Scribd.SignIn.open("subscribe", btn.attr("href"));
          return e.preventDefault();
        };
      })(this));
    }

    return CRLanding;

  })();

}).call(this);




/************************************************************************
 * :class_inlines, 'app/views', ... (last modified: (none))
 ************************************************************************/

